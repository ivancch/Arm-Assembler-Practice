


ARM Macro Assembler    Page 1 


    1 00000000         ; Библиотека макроопределений пользователя
    2 00000000         ; Макроопределение загрузки двух двойных слов из памяти
    3 00000000         ; в регистры процессора, начиная с адреса в $A_D
    4 00000000                 MACRO
    5 00000000                 D_LOAD           $D1_H, $D1_L, $D2_H, $D2_L, $A_D
    6 00000000         ; Загрузить последовательно 4-е слова с пост-смещением
    7 00000000         ; указателя на 4 байта
    8 00000000                 LDR              $D1_L, [$A_D], #4
    9 00000000                 LDR              $D1_H, [$A_D], #4
   10 00000000                 LDR              $D2_L, [$A_D], #4
   11 00000000                 LDR              $D2_H, [$A_D], #4
   12 00000000                 MEND
   13 00000000         
   14 00000000         ; Макроопределение операции сохранения тройного слова
   15 00000000         ; из регистров ЦПУ в память, начиная с адреса $A_D
   16 00000000                 MACRO
   17 00000000                 SAVE_3W          $R_H, $R_W, $R_L, $A_D
   18 00000000                 STR              $R_L, [$A_D], #4
   19 00000000                 STR              $R_W, [$A_D], #4
   20 00000000                 STR              $R_H, [$A_D], #4
   21 00000000                 MEND
   22 00000000         
   23 00000000         ; Макроопределение операции сложния двойных слов
   24 00000000                 MACRO
   25 00000000                 D_ADD            $D1_H, $D1_L, $D2_H, $D2_L, $R_H, $R_W, $R_L
   26 00000000         ; Сумма младших слов
   27 00000000                 ADDS             $R_L, $D1_L, $D2_L
   28 00000000         ; Сумма старших слов
   29 00000000                 ADCS             $R_W, $D1_H, $D2_H
   30 00000000         ; Учет возможного переполнения 
   31 00000000                 MOV              $R_H, #0
   32 00000000                 ADC              $R_H, #0
   33 00000000                 MEND
   34 00000000         
   35 00000000         
   36 00000000         ; Макроопределение операции вычитания двойных слов
   37 00000000                 MACRO
   38 00000000                 D_SUB            $D1_H, $D1_L, $D2_H, $D2_L, $R_H, $R_W, $R_L
   39 00000000         ; Разность младших слов
   40 00000000                 SUBS             $R_L, $D1_L, $D2_L
   41 00000000         ; Разность старших слов
   42 00000000                 SBCS             $R_W, $D1_H, $D2_H
   43 00000000         ; Учет возможного "заема" 
   44 00000000                 MOV              $R_H, #0
   45 00000000                 SBC              $R_H, #0
   46 00000000                 MEND
   47 00000000         
   48 00000000                 END
Command Line: --debug --xref --width=132 --diag_suppress=9931 --cpu=Cortex-M4.fp.sp --depend=.\objects\mymacro1.d -o.\objects\mymacr
o1.o -IC:\Users\user1\AppData\Local\Arm\Packs\ARM\CMSIS\5.9.0\Device\ARM\ARMCM4\Include --predefine="__UVISION_VERSION SETA 537" --p
redefine="ARMCM4_FP SETA 1" --list=.\listings\mymacro1.lst src\AssemblerPractice\MyMacro1.s
332 symbols in table
